#!/usr/bin/env python3

import lark

def main(top):
    with (top / "grammar.lark").open() as f:
        parser = lark.Lark(f.read(), parser='lalr')
    testfiles = top / "testfiles"
    for tf in testfiles.iterdir():
        print(f"==== {tf}")
        print(parser.parse(tf.read_text()).pretty())

if __name__ == '__main__':
    import pathlib
    main(pathlib.Path(__file__).parent)
